<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é«˜æ©Ÿèƒ½ã‚µã‚¤ã‚³ãƒ­ã‚¢ãƒ—ãƒª | TDDå®Ÿè£…</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-color: #6366f1;
            --primary-hover: #4f46e5;
            --secondary-color: #10b981;
            --background: #0f172a;
            --surface: #1e293b;
            --surface-light: #334155;
            --text-primary: #f1f5f9;
            --text-secondary: #94a3b8;
            --border: #475569;
            --dice-d4: #ef4444;
            --dice-d6: #f59e0b;
            --dice-d8: #10b981;
            --dice-d10: #3b82f6;
            --dice-d12: #8b5cf6;
            --dice-d20: #ec4899;
            --dice-d100: #06b6d4;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: var(--background);
            color: var(--text-primary);
            min-height: 100vh;
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }

        header {
            text-align: center;
            margin-bottom: 2rem;
        }

        h1 {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
            background: linear-gradient(135deg, var(--primary-color), var(--dice-d20));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .subtitle {
            color: var(--text-secondary);
            font-size: 1rem;
        }

        /* Control Panel */
        .control-panel {
            background: var(--surface);
            border-radius: 1rem;
            padding: 1.5rem;
            margin-bottom: 2rem;
            border: 1px solid var(--border);
        }

        .controls-row {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
            align-items: center;
            justify-content: center;
        }

        .control-group {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        label {
            font-size: 0.875rem;
            color: var(--text-secondary);
            font-weight: 500;
        }

        select, input[type="number"] {
            background: var(--surface-light);
            border: 1px solid var(--border);
            border-radius: 0.5rem;
            padding: 0.75rem 1rem;
            color: var(--text-primary);
            font-size: 1rem;
            min-width: 150px;
            cursor: pointer;
            transition: all 0.2s;
        }

        select:focus, input:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.2);
        }

        /* Dice Type Selector */
        .dice-selector {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            justify-content: center;
            margin-top: 1rem;
        }

        .dice-type-btn {
            background: var(--surface-light);
            border: 2px solid transparent;
            border-radius: 0.75rem;
            padding: 0.75rem 1.25rem;
            color: var(--text-primary);
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            position: relative;
            overflow: hidden;
        }

        .dice-type-btn:hover {
            background: var(--surface);
            transform: translateY(-2px);
        }

        .dice-type-btn.active {
            border-color: var(--primary-color);
            background: var(--primary-color);
        }

        .dice-type-btn.d4.active { background: var(--dice-d4); border-color: var(--dice-d4); }
        .dice-type-btn.d6.active { background: var(--dice-d6); border-color: var(--dice-d6); }
        .dice-type-btn.d8.active { background: var(--dice-d8); border-color: var(--dice-d8); }
        .dice-type-btn.d10.active { background: var(--dice-d10); border-color: var(--dice-d10); }
        .dice-type-btn.d12.active { background: var(--dice-d12); border-color: var(--dice-d12); }
        .dice-type-btn.d20.active { background: var(--dice-d20); border-color: var(--dice-d20); }
        .dice-type-btn.d100.active { background: var(--dice-d100); border-color: var(--dice-d100); }

        /* Roll Button */
        .roll-btn {
            background: linear-gradient(135deg, var(--primary-color), var(--primary-hover));
            border: none;
            border-radius: 1rem;
            padding: 1rem 3rem;
            color: white;
            font-size: 1.25rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 4px 15px rgba(99, 102, 241, 0.4);
            margin-top: 1rem;
        }

        .roll-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(99, 102, 241, 0.6);
        }

        .roll-btn:active {
            transform: translateY(0);
        }

        .roll-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        /* Dice Display Area */
        .dice-area {
            background: var(--surface);
            border-radius: 1rem;
            padding: 2rem;
            margin-bottom: 2rem;
            min-height: 300px;
            border: 1px solid var(--border);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .dice-container {
            display: flex;
            flex-wrap: wrap;
            gap: 1.5rem;
            justify-content: center;
            margin-bottom: 2rem;
        }

        /* 3D Dice Styles */
        .dice {
            width: 80px;
            height: 80px;
            perspective: 200px;
            position: relative;
        }

        .dice-inner {
            width: 100%;
            height: 100%;
            position: relative;
            transform-style: preserve-3d;
            transition: transform 0.1s;
        }

        .dice.rolling .dice-inner {
            animation: diceRoll 1.5s ease-out;
        }

        @keyframes diceRoll {
            0% {
                transform: rotateX(0deg) rotateY(0deg) rotateZ(0deg);
            }
            25% {
                transform: rotateX(180deg) rotateY(180deg) rotateZ(90deg);
            }
            50% {
                transform: rotateX(360deg) rotateY(270deg) rotateZ(180deg);
            }
            75% {
                transform: rotateX(540deg) rotateY(360deg) rotateZ(270deg);
            }
            100% {
                transform: rotateX(720deg) rotateY(540deg) rotateZ(360deg);
            }
        }

        .dice-face {
            position: absolute;
            width: 100%;
            height: 100%;
            background: linear-gradient(145deg, var(--surface-light), var(--surface));
            border: 2px solid var(--border);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            font-weight: bold;
            color: var(--text-primary);
            backface-visibility: hidden;
            box-shadow: inset 0 2px 10px rgba(0,0,0,0.3);
        }

        /* Dice-specific colors */
        .dice[data-type="D4"] .dice-face { background: linear-gradient(145deg, #f87171, var(--dice-d4)); }
        .dice[data-type="D6"] .dice-face { background: linear-gradient(145deg, #fbbf24, var(--dice-d6)); }
        .dice[data-type="D8"] .dice-face { background: linear-gradient(145deg, #34d399, var(--dice-d8)); }
        .dice[data-type="D10"] .dice-face { background: linear-gradient(145deg, #60a5fa, var(--dice-d10)); }
        .dice[data-type="D12"] .dice-face { background: linear-gradient(145deg, #a78bfa, var(--dice-d12)); }
        .dice[data-type="D20"] .dice-face { background: linear-gradient(145deg, #f472b6, var(--dice-d20)); }
        .dice[data-type="D100"] .dice-face { background: linear-gradient(145deg, #22d3ee, var(--dice-d100)); }

        /* Result Display */
        .result-display {
            text-align: center;
            margin-top: 1rem;
        }

        .result-total {
            font-size: 3rem;
            font-weight: 800;
            background: linear-gradient(135deg, var(--secondary-color), #059669);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .result-label {
            color: var(--text-secondary);
            font-size: 0.875rem;
            margin-bottom: 0.5rem;
        }

        .result-breakdown {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            justify-content: center;
            margin-top: 1rem;
        }

        .result-item {
            background: var(--surface-light);
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            font-weight: 600;
        }

        /* History Section */
        .history-section {
            background: var(--surface);
            border-radius: 1rem;
            padding: 1.5rem;
            border: 1px solid var(--border);
        }

        .history-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .history-title {
            font-size: 1.25rem;
            font-weight: 600;
        }

        .clear-history-btn {
            background: var(--surface-light);
            border: 1px solid var(--border);
            border-radius: 0.5rem;
            padding: 0.5rem 1rem;
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.2s;
        }

        .clear-history-btn:hover {
            background: #ef4444;
            border-color: #ef4444;
            color: white;
        }

        .history-list {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
            max-height: 400px;
            overflow-y: auto;
        }

        .history-item {
            background: var(--surface-light);
            border-radius: 0.75rem;
            padding: 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.2s;
        }

        .history-item:hover {
            background: var(--border);
        }

        .history-info {
            flex: 1;
        }

        .history-dice {
            font-weight: 600;
            margin-bottom: 0.25rem;
        }

        .history-results {
            color: var(--text-secondary);
            font-size: 0.875rem;
        }

        .history-total {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--secondary-color);
            margin-left: 1rem;
        }

        .empty-history {
            text-align: center;
            color: var(--text-secondary);
            padding: 2rem;
        }

        /* Test Console */
        .test-console {
            background: #000;
            border-radius: 1rem;
            padding: 1.5rem;
            margin-top: 2rem;
            border: 1px solid var(--border);
            font-family: 'Courier New', monospace;
        }

        .test-console-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .test-console-title {
            color: #10b981;
            font-weight: 600;
        }

        .run-tests-btn {
            background: var(--secondary-color);
            border: none;
            border-radius: 0.5rem;
            padding: 0.5rem 1rem;
            color: white;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }

        .run-tests-btn:hover {
            background: #059669;
        }

        .test-output {
            color: #10b981;
            font-size: 0.875rem;
            max-height: 300px;
            overflow-y: auto;
            white-space: pre-wrap;
        }

        .test-pass {
            color: #10b981;
        }

        .test-fail {
            color: #ef4444;
        }

        .test-info {
            color: #3b82f6;
        }

        /* Accessibility */
        @media (prefers-reduced-motion: reduce) {
            .dice.rolling .dice-inner {
                animation: none;
            }

            .dice-type-btn,
            .roll-btn,
            .history-item {
                transition: none;
            }
        }

        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border-width: 0;
        }

        /* Responsive */
        @media (max-width: 768px) {
            h1 {
                font-size: 1.75rem;
            }

            .controls-row {
                flex-direction: column;
                align-items: stretch;
            }

            .dice {
                width: 60px;
                height: 60px;
            }

            .dice-face {
                font-size: 1.5rem;
            }

            .result-total {
                font-size: 2rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>ğŸ² é«˜æ©Ÿèƒ½ã‚µã‚¤ã‚³ãƒ­ã‚¢ãƒ—ãƒª</h1>
            <p class="subtitle">TDD (Test-Driven Development) ã§å®Ÿè£…ã•ã‚ŒãŸã‚µã‚¤ã‚³ãƒ­ã‚¢ãƒ—ãƒª</p>
        </header>

        <!-- Control Panel -->
        <section class="control-panel" role="region" aria-label="ã‚µã‚¤ã‚³ãƒ­æ“ä½œãƒ‘ãƒãƒ«">
            <div class="control-group" style="align-items: center;">
                <label for="dice-count">ã‚µã‚¤ã‚³ãƒ­ã®å€‹æ•°</label>
                <input
                    type="number"
                    id="dice-count"
                    min="1"
                    max="20"
                    value="1"
                    aria-describedby="dice-count-help"
                >
                <span id="dice-count-help" class="sr-only">1ã‹ã‚‰20ã¾ã§ã®å€¤ã‚’å…¥åŠ›ã§ãã¾ã™</span>
            </div>

            <div class="dice-selector" role="group" aria-label="ã‚µã‚¤ã‚³ãƒ­ã‚¿ã‚¤ãƒ—é¸æŠ">
                <button class="dice-type-btn d6 active" data-dice="D6" aria-pressed="true">D6</button>
                <button class="dice-type-btn d4" data-dice="D4" aria-pressed="false">D4</button>
                <button class="dice-type-btn d8" data-dice="D8" aria-pressed="false">D8</button>
                <button class="dice-type-btn d10" data-dice="D10" aria-pressed="false">D10</button>
                <button class="dice-type-btn d12" data-dice="D12" aria-pressed="false">D12</button>
                <button class="dice-type-btn d20" data-dice="D20" aria-pressed="false">D20</button>
                <button class="dice-type-btn d100" data-dice="D100" aria-pressed="false">D100</button>
            </div>

            <button class="roll-btn" id="roll-btn" aria-label="ã‚µã‚¤ã‚³ãƒ­ã‚’æŒ¯ã‚‹">
                ğŸ² ã‚µã‚¤ã‚³ãƒ­ã‚’æŒ¯ã‚‹
            </button>
        </section>

        <!-- Dice Display Area -->
        <section class="dice-area" role="region" aria-label="ã‚µã‚¤ã‚³ãƒ­è¡¨ç¤ºã‚¨ãƒªã‚¢" aria-live="polite">
            <div class="dice-container" id="dice-container">
                <p class="empty-history" style="color: var(--text-secondary);">
                    ã‚µã‚¤ã‚³ãƒ­ã‚’æŒ¯ã‚‹æº–å‚™ãŒã§ãã¾ã—ãŸï¼
                </p>
            </div>
            <div class="result-display" id="result-display" style="display: none;">
                <div class="result-label">åˆè¨ˆå€¤</div>
                <div class="result-total" id="result-total">0</div>
                <div class="result-breakdown" id="result-breakdown"></div>
            </div>
        </section>

        <!-- History Section -->
        <section class="history-section" role="region" aria-label="å±¥æ­´">
            <div class="history-header">
                <h2 class="history-title">ğŸ“‹ å±¥æ­´</h2>
                <button class="clear-history-btn" id="clear-history-btn" aria-label="å±¥æ­´ã‚’ã‚¯ãƒªã‚¢">
                    ã‚¯ãƒªã‚¢
                </button>
            </div>
            <div class="history-list" id="history-list">
                <p class="empty-history">ã¾ã å±¥æ­´ãŒã‚ã‚Šã¾ã›ã‚“</p>
            </div>
        </section>

        <!-- Test Console -->
        <section class="test-console" role="region" aria-label="ãƒ†ã‚¹ãƒˆã‚³ãƒ³ã‚½ãƒ¼ãƒ«">
            <div class="test-console-header">
                <span class="test-console-title">ğŸ§ª TDD ãƒ†ã‚¹ãƒˆã‚³ãƒ³ã‚½ãƒ¼ãƒ«</span>
                <button class="run-tests-btn" id="run-tests-btn">ã™ã¹ã¦ã®ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œ</button>
            </div>
            <div class="test-output" id="test-output">ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œã™ã‚‹ã«ã¯ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ãã ã•ã„...</div>
        </section>
    </div>

    <script>
    /**
     * ============================================================
     * TDD: é«˜æ©Ÿèƒ½ã‚µã‚¤ã‚³ãƒ­ã‚¢ãƒ—ãƒª
     * ============================================================
     * Red-Green-Refactor ã‚µã‚¤ã‚¯ãƒ«ã§å®Ÿè£…ã•ã‚ŒãŸã‚µã‚¤ã‚³ãƒ­ã‚¢ãƒ—ãƒª
     * ============================================================
     */

    /**
     * ============================================================
     * PHASE 2: ã‚³ã‚¢ãƒ­ã‚¸ãƒƒã‚¯ (DiceLogic)
     * ============================================================
     *
     * REDãƒ•ã‚§ãƒ¼ã‚º: æœ€åˆã«ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã‚’å®šç¾©
     * - DiceLogic.roll('D6', 1) ãŒ 1-6 ã®æ•°å€¤ã‚’è¿”ã™
     * - DiceLogic.roll('D6', 3) ãŒ3ã¤ã®æ•°å€¤ã®é…åˆ—ã‚’è¿”ã™
     * - åˆè¨ˆå€¤ãŒæ­£ã—ãè¨ˆç®—ã•ã‚Œã‚‹
     * - ã™ã¹ã¦ã®ã‚µã‚¤ã‚³ãƒ­ã‚¿ã‚¤ãƒ—ãŒæ­£ã—ãå‹•ä½œã™ã‚‹
     */

    const DiceLogic = {
        // ã‚µã‚¤ã‚³ãƒ­ã®å®šç¾©
        diceTypes: {
            D4: { sides: 4, name: 'D4' },
            D6: { sides: 6, name: 'D6' },
            D8: { sides: 8, name: 'D8' },
            D10: { sides: 10, name: 'D10' },
            D12: { sides: 12, name: 'D12' },
            D20: { sides: 20, name: 'D20' },
            D100: { sides: 100, name: 'D100' }
        },

        /**
         * ä¹±æ•°ç”Ÿæˆï¼ˆãƒ†ã‚¹ãƒˆå¯èƒ½ãªã‚ˆã†ã«åˆ†é›¢ï¼‰
         * @param {number} min - æœ€å°å€¤
         * @param {number} max - æœ€å¤§å€¤
         * @returns {number} ä¹±æ•°
         */
        random: function(min, max) {
            return Math.floor(Math.random() * (max - min + 1)) + min;
        },

        /**
         * ã‚µã‚¤ã‚³ãƒ­ã‚’æŒ¯ã‚‹
         * @param {string} type - ã‚µã‚¤ã‚³ãƒ­ã‚¿ã‚¤ãƒ— (D4, D6, D8, D10, D12, D20, D100)
         * @param {number} count - ã‚µã‚¤ã‚³ãƒ­ã®å€‹æ•°
         * @returns {Object} { results: number[], total: number }
         */
        roll: function(type, count) {
            const dice = this.diceTypes[type];
            if (!dice) {
                throw new Error(`Invalid dice type: ${type}`);
            }
            if (count < 1 || count > 20) {
                throw new Error(`Invalid dice count: ${count}. Must be between 1 and 20.`);
            }

            const results = [];
            for (let i = 0; i < count; i++) {
                results.push(this.random(1, dice.sides));
            }

            return {
                results: results,
                total: results.reduce((sum, val) => sum + val, 0)
            };
        },

        /**
         * ã‚µã‚¤ã‚³ãƒ­ã®æœ€å¤§å€¤ã‚’å–å¾—
         * @param {string} type - ã‚µã‚¤ã‚³ãƒ­ã‚¿ã‚¤ãƒ—
         * @returns {number} æœ€å¤§å€¤
         */
        getMaxValue: function(type) {
            const dice = this.diceTypes[type];
            return dice ? dice.sides : 0;
        },

        /**
         * ã™ã¹ã¦ã®ã‚µã‚¤ã‚³ãƒ­ã‚¿ã‚¤ãƒ—ã‚’å–å¾—
         * @returns {string[]} ã‚µã‚¤ã‚³ãƒ­ã‚¿ã‚¤ãƒ—ã®é…åˆ—
         */
        getDiceTypes: function() {
            return Object.keys(this.diceTypes);
        }
    };

    /**
     * ============================================================
     * PHASE 3: å±¥æ­´ç®¡ç† (HistoryManager)
     * ============================================================
     *
     * REDãƒ•ã‚§ãƒ¼ã‚º: æœ€åˆã«ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã‚’å®šç¾©
     * - å±¥æ­´ãŒè¿½åŠ ã•ã‚Œã‚‹
     * - LocalStorageã«ä¿å­˜ã•ã‚Œã‚‹
     * - æœ€å¤§50ä»¶ã‚’è¶…ãˆã‚‹ã¨å¤ã„ã‚‚ã®ãŒå‰Šé™¤ã•ã‚Œã‚‹
     * - å±¥æ­´ã‚’ã‚¯ãƒªã‚¢ã§ãã‚‹
     */

    const HistoryManager = {
        STORAGE_KEY: 'dice-app-history',
        MAX_HISTORY: 50,

        /**
         * å±¥æ­´ã‚’å–å¾—
         * @returns {Array} å±¥æ­´é…åˆ—
         */
        getHistory: function() {
            try {
                const stored = localStorage.getItem(this.STORAGE_KEY);
                return stored ? JSON.parse(stored) : [];
            } catch (e) {
                console.error('Failed to load history:', e);
                return [];
            }
        },

        /**
         * å±¥æ­´ã‚’ä¿å­˜
         * @param {Array} history - å±¥æ­´é…åˆ—
         */
        saveHistory: function(history) {
            try {
                localStorage.setItem(this.STORAGE_KEY, JSON.stringify(history));
            } catch (e) {
                console.error('Failed to save history:', e);
            }
        },

        /**
         * ãƒ­ãƒ¼ãƒ«çµæœã‚’å±¥æ­´ã«è¿½åŠ 
         * @param {string} diceType - ã‚µã‚¤ã‚³ãƒ­ã‚¿ã‚¤ãƒ—
         * @param {number} count - å€‹æ•°
         * @param {Array} results - çµæœé…åˆ—
         * @param {number} total - åˆè¨ˆå€¤
         */
        addRoll: function(diceType, count, results, total) {
            const history = this.getHistory();

            const entry = {
                id: Date.now(),
                timestamp: new Date().toISOString(),
                diceType: diceType,
                count: count,
                results: results,
                total: total
            };

            history.unshift(entry); // æ–°ã—ã„ã‚‚ã®ã‚’å…ˆé ­ã«è¿½åŠ 

            // æœ€å¤§50ä»¶ã‚’è¶…ãˆãŸã‚‰å¤ã„ã‚‚ã®ã‚’å‰Šé™¤
            if (history.length > this.MAX_HISTORY) {
                history.splice(this.MAX_HISTORY);
            }

            this.saveHistory(history);
            return entry;
        },

        /**
         * å±¥æ­´ã‚’ã‚¯ãƒªã‚¢
         */
        clear: function() {
            localStorage.removeItem(this.STORAGE_KEY);
        },

        /**
         * å±¥æ­´ã‚’1ä»¶å‰Šé™¤
         * @param {number} id - ã‚¨ãƒ³ãƒˆãƒªãƒ¼ID
         */
        deleteEntry: function(id) {
            const history = this.getHistory();
            const filtered = history.filter(entry => entry.id !== id);
            this.saveHistory(filtered);
        }
    };

    /**
     * ============================================================
     * PHASE 4: 3Dãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚° (DiceRenderer)
     * ============================================================
     *
     * REDãƒ•ã‚§ãƒ¼ã‚º: æœ€åˆã«ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã‚’å®šç¾©
     * - ã‚µã‚¤ã‚³ãƒ­è¦ç´ ãŒä½œæˆã•ã‚Œã‚‹
     * - ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³CSSã‚¯ãƒ©ã‚¹ãŒé©ç”¨ã•ã‚Œã‚‹
     * - çµæœãŒè¡¨ç¤ºã•ã‚Œã‚‹
     */

    const DiceRenderer = {
        /**
         * ã‚µã‚¤ã‚³ãƒ­è¦ç´ ã‚’ä½œæˆ
         * @param {string} type - ã‚µã‚¤ã‚³ãƒ­ã‚¿ã‚¤ãƒ—
         * @param {number} value - è¡¨ç¤ºã™ã‚‹å€¤
         * @returns {HTMLElement} ã‚µã‚¤ã‚³ãƒ­è¦ç´ 
         */
        createDice: function(type, value) {
            const dice = document.createElement('div');
            dice.className = 'dice';
            dice.dataset.type = type;
            dice.setAttribute('role', 'img');
            dice.setAttribute('aria-label', `${type}ã‚µã‚¤ã‚³ãƒ­: ${value}`);

            const inner = document.createElement('div');
            inner.className = 'dice-inner';

            const face = document.createElement('div');
            face.className = 'dice-face';
            face.textContent = value;

            inner.appendChild(face);
            dice.appendChild(inner);

            return dice;
        },

        /**
         * ã‚µã‚¤ã‚³ãƒ­ã‚³ãƒ³ãƒ†ãƒŠã‚’ã‚¯ãƒªã‚¢
         */
        clearContainer: function() {
            const container = document.getElementById('dice-container');
            if (container) {
                container.innerHTML = '';
            }
        },

        /**
         * ã‚µã‚¤ã‚³ãƒ­ã‚’è¡¨ç¤º
         * @param {string} type - ã‚µã‚¤ã‚³ãƒ­ã‚¿ã‚¤ãƒ—
         * @param {Array} results - çµæœé…åˆ—
         */
        renderDice: function(type, results) {
            this.clearContainer();
            const container = document.getElementById('dice-container');

            results.forEach((value, index) => {
                const dice = this.createDice(type, value);
                container.appendChild(dice);

                // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å°‘ã—é…ã‚‰ã›ã¦é©ç”¨
                setTimeout(() => {
                    dice.classList.add('rolling');
                }, index * 100);
            });
        },

        /**
         * çµæœã‚’è¡¨ç¤º
         * @param {number} total - åˆè¨ˆå€¤
         * @param {Array} results - çµæœé…åˆ—
         */
        renderResult: function(total, results) {
            const resultDisplay = document.getElementById('result-display');
            const resultTotal = document.getElementById('result-total');
            const resultBreakdown = document.getElementById('result-breakdown');

            resultTotal.textContent = total;
            resultBreakdown.textContent = '';

            results.forEach((value, index) => {
                const item = document.createElement('div');
                item.className = 'result-item';
                item.textContent = `#${index + 1}: ${value}`;
                resultBreakdown.appendChild(item);
            });

            resultDisplay.style.display = 'block';
        },

        /**
         * çµæœã‚¨ãƒªã‚¢ã‚’éè¡¨ç¤º
         */
        hideResult: function() {
            const resultDisplay = document.getElementById('result-display');
            resultDisplay.style.display = 'none';
        }
    };

    /**
     * ============================================================
     * PHASE 5: UIã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ (UIController)
     * ============================================================
     *
     * REDãƒ•ã‚§ãƒ¼ã‚º: æœ€åˆã«ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã‚’å®šç¾©
     * - Rollãƒœã‚¿ãƒ³ã‚¯ãƒªãƒƒã‚¯ã§ã‚µã‚¤ã‚³ãƒ­ãŒæŒ¯ã‚‰ã‚Œã‚‹
     * - ã‚µã‚¤ã‚³ãƒ­ã‚¿ã‚¤ãƒ—é¸æŠã§è¨­å®šãŒå¤‰æ›´ã•ã‚Œã‚‹
     * - å±¥æ­´ãŒæ›´æ–°ã•ã‚Œã‚‹
     */

    const UIController = {
        // å®šæ•°ï¼ˆCSSã¨åŒæœŸã•ã›ã‚‹ï¼‰
        ANIMATION_DURATION: 1500, // CSSã®1.5sã¨ä¸€è‡´

        state: {
            selectedDice: 'D6',
            diceCount: 1,
            isRolling: false
        },

        /**
         * åˆæœŸåŒ–
         */
        init: function() {
            this.bindEvents();
            this.loadHistory();
            this.updateDiceCount();
        },

        /**
         * ã‚¤ãƒ™ãƒ³ãƒˆã‚’ãƒã‚¤ãƒ³ãƒ‰
         */
        bindEvents: function() {
            // ã‚µã‚¤ã‚³ãƒ­ã‚¿ã‚¤ãƒ—é¸æŠ
            const diceButtons = document.querySelectorAll('.dice-type-btn');
            diceButtons.forEach(btn => {
                btn.addEventListener('click', (e) => {
                    this.selectDiceType(e.target.dataset.dice);
                });
            });

            // ã‚µã‚¤ã‚³ãƒ­æ•°å…¥åŠ›
            const countInput = document.getElementById('dice-count');
            countInput.addEventListener('change', (e) => {
                this.updateDiceCount();
            });

            // Rollãƒœã‚¿ãƒ³
            const rollBtn = document.getElementById('roll-btn');
            rollBtn.addEventListener('click', () => {
                this.rollDice();
            });

            // å±¥æ­´ã‚¯ãƒªã‚¢ãƒœã‚¿ãƒ³
            const clearBtn = document.getElementById('clear-history-btn');
            clearBtn.addEventListener('click', () => {
                this.clearHistory();
            });

            // ãƒ†ã‚¹ãƒˆå®Ÿè¡Œãƒœã‚¿ãƒ³
            const testBtn = document.getElementById('run-tests-btn');
            testBtn.addEventListener('click', () => {
                TestRunner.runAllTests();
            });

            // ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆï¼ˆãƒ•ã‚©ãƒ¼ãƒ å…¥åŠ›ä¸­ã¯ç„¡åŠ¹åŒ–ï¼‰
            document.addEventListener('keydown', (e) => {
                // ãƒ•ã‚©ãƒ¼ãƒ è¦ç´ ã«ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ãŒã‚ã‚‹å ´åˆã¯ç„¡åŠ¹åŒ–
                const isInputFocused = e.target.tagName === 'INPUT' || e.target.tagName === 'SELECT';
                if (e.key === 'Enter' && !e.shiftKey && !isInputFocused) {
                    e.preventDefault();
                    this.rollDice();
                }
            });
        },

        /**
         * ã‚µã‚¤ã‚³ãƒ­ã‚¿ã‚¤ãƒ—ã‚’é¸æŠ
         * @param {string} type - ã‚µã‚¤ã‚³ãƒ­ã‚¿ã‚¤ãƒ—
         */
        selectDiceType: function(type) {
            this.state.selectedDice = type;

            // ãƒœã‚¿ãƒ³ã®çŠ¶æ…‹ã‚’æ›´æ–°
            const buttons = document.querySelectorAll('.dice-type-btn');
            buttons.forEach(btn => {
                const isSelected = btn.dataset.dice === type;
                btn.classList.toggle('active', isSelected);
                btn.setAttribute('aria-pressed', isSelected.toString());
            });
        },

        /**
         * ã‚µã‚¤ã‚³ãƒ­æ•°ã‚’æ›´æ–°
         */
        updateDiceCount: function() {
            const input = document.getElementById('dice-count');
            let value = parseInt(input.value);

            // ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
            if (isNaN(value) || value < 1) value = 1;
            if (value > 20) value = 20;

            input.value = value;
            this.state.diceCount = value;
        },

        /**
         * ã‚µã‚¤ã‚³ãƒ­ã‚’æŒ¯ã‚‹
         */
        rollDice: function() {
            if (this.state.isRolling) return;

            this.state.isRolling = true;

            // ã™ã¹ã¦ã®ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ã‚’ç„¡åŠ¹åŒ–
            const rollBtn = document.getElementById('roll-btn');
            const countInput = document.getElementById('dice-count');
            const diceButtons = document.querySelectorAll('.dice-type-btn');

            rollBtn.disabled = true;
            countInput.disabled = true;
            diceButtons.forEach(btn => btn.disabled = true);

            rollBtn.textContent = 'ğŸ² æŒ¯ã£ã¦ã„ã¾ã™...';

            // çµæœã‚’ç”Ÿæˆ
            const result = DiceLogic.roll(this.state.selectedDice, this.state.diceCount);

            // ã‚µã‚¤ã‚³ãƒ­ã‚’è¡¨ç¤º
            DiceRenderer.renderDice(this.state.selectedDice, result.results);

            // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³å¾Œã«çµæœã‚’è¡¨ç¤º
            setTimeout(() => {
                DiceRenderer.renderResult(result.total, result.results);

                // å±¥æ­´ã«è¿½åŠ 
                HistoryManager.addRoll(
                    this.state.selectedDice,
                    this.state.diceCount,
                    result.results,
                    result.total
                );
                this.loadHistory();

                // ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ã‚’å†æœ‰åŠ¹åŒ–
                rollBtn.disabled = false;
                countInput.disabled = false;
                diceButtons.forEach(btn => btn.disabled = false);

                rollBtn.textContent = 'ğŸ² ã‚µã‚¤ã‚³ãƒ­ã‚’æŒ¯ã‚‹';
                this.state.isRolling = false;
            }, this.ANIMATION_DURATION);
        },

        /**
         * å±¥æ­´ã‚’èª­ã¿è¾¼ã‚“ã§è¡¨ç¤º
         */
        loadHistory: function() {
            const history = HistoryManager.getHistory();
            const list = document.getElementById('history-list');

            if (history.length === 0) {
                list.textContent = '';
                const emptyMsg = document.createElement('p');
                emptyMsg.className = 'empty-history';
                emptyMsg.textContent = 'ã¾ã å±¥æ­´ãŒã‚ã‚Šã¾ã›ã‚“';
                list.appendChild(emptyMsg);
                return;
            }

            list.textContent = '';
            history.forEach(entry => {
                const item = this.createHistoryItem(entry);
                list.appendChild(item);
            });
        },

        /**
         * å±¥æ­´ã‚¢ã‚¤ãƒ†ãƒ ã‚’ä½œæˆ
         * @param {Object} entry - å±¥æ­´ã‚¨ãƒ³ãƒˆãƒªãƒ¼
         * @returns {HTMLElement} å±¥æ­´ã‚¢ã‚¤ãƒ†ãƒ è¦ç´ 
         */
        createHistoryItem: function(entry) {
            const item = document.createElement('div');
            item.className = 'history-item';

            const date = new Date(entry.timestamp);
            const timeStr = date.toLocaleTimeString('ja-JP', {
                hour: '2-digit',
                minute: '2-digit',
                second: '2-digit'
            });

            // å®‰å…¨ãªDOMæ“ä½œã§æ§‹ç¯‰ï¼ˆXSSè„†å¼±æ€§å¯¾ç­–ï¼‰
            const infoDiv = document.createElement('div');
            infoDiv.className = 'history-info';

            const diceDiv = document.createElement('div');
            diceDiv.className = 'history-dice';
            diceDiv.textContent = `${entry.diceType} Ã— ${entry.count}`;

            const resultsDiv = document.createElement('div');
            resultsDiv.className = 'history-results';
            resultsDiv.textContent = entry.results.join(', ');

            const timeDiv = document.createElement('div');
            timeDiv.className = 'history-results';
            timeDiv.style.fontSize = '0.75rem';
            timeDiv.textContent = timeStr;

            const totalDiv = document.createElement('div');
            totalDiv.className = 'history-total';
            totalDiv.textContent = entry.total;

            infoDiv.appendChild(diceDiv);
            infoDiv.appendChild(resultsDiv);
            infoDiv.appendChild(timeDiv);
            item.appendChild(infoDiv);
            item.appendChild(totalDiv);

            return item;
        },

        /**
         * å±¥æ­´ã‚’ã‚¯ãƒªã‚¢
         */
        clearHistory: function() {
            if (confirm('å±¥æ­´ã‚’ã‚¯ãƒªã‚¢ã—ã¾ã™ã‹ï¼Ÿ')) {
                HistoryManager.clear();
                this.loadHistory();
            }
        }
    };

    /**
     * ============================================================
     * TDD ãƒ†ã‚¹ãƒˆãƒ©ãƒ³ãƒŠãƒ¼ (TestRunner)
     * ============================================================
     *
     * ãƒ–ãƒ©ã‚¦ã‚¶ãƒ™ãƒ¼ã‚¹ã®TDDãƒ†ã‚¹ãƒˆã‚¹ã‚¤ãƒ¼ãƒˆ
     * Red-Green-Refactor ã‚µã‚¤ã‚¯ãƒ«ã®æ¤œè¨¼
     */

    const TestRunner = {
        results: [],
        output: null,

        /**
         * ãƒ†ã‚¹ãƒˆå‡ºåŠ›ã‚’åˆæœŸåŒ–
         */
        init: function() {
            this.output = document.getElementById('test-output');
            this.results = [];
            this.log('ğŸ§ª TDD ãƒ†ã‚¹ãƒˆã‚¹ã‚¤ãƒ¼ãƒˆé–‹å§‹\n', 'info');
        },

        /**
         * ãƒ­ã‚°å‡ºåŠ›
         * @param {string} message - ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
         * @param {string} type - ã‚¿ã‚¤ãƒ— (pass/fail/info)
         */
        log: function(message, type = 'info') {
            if (this.output) {
                const span = document.createElement('span');
                span.className = `test-${type}`;
                span.textContent = message;
                this.output.appendChild(span);
                this.output.scrollTop = this.output.scrollHeight;
            }
            console.log(message);
        },

        /**
         * ã‚¢ã‚µãƒ¼ã‚·ãƒ§ãƒ³
         * @param {boolean} condition - æ¡ä»¶
         * @param {string} message - ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
         */
        assert: function(condition, message) {
            if (condition) {
                this.log(`  âœ“ ${message}\n`, 'pass');
                this.results.push({ name: message, passed: true });
            } else {
                this.log(`  âœ— ${message}\n`, 'fail');
                this.results.push({ name: message, passed: false });
            }
        },

        /**
         * ç­‰å€¤ãƒã‚§ãƒƒã‚¯
         */
        assertEquals: function(actual, expected, message) {
            const condition = actual === expected;
            const fullMessage = message || `Expected ${expected}, but got ${actual}`;
            this.assert(condition, fullMessage);
        },

        /**
         * é…åˆ—ç­‰å€¤ãƒã‚§ãƒƒã‚¯
         */
        assertArrayEquals: function(actual, expected, message) {
            const condition = JSON.stringify(actual) === JSON.stringify(expected);
            const fullMessage = message || `Expected [${expected.join(', ')}], but got [${actual.join(', ')}]`;
            this.assert(condition, fullMessage);
        },

        /**
         * ç¯„å›²ãƒã‚§ãƒƒã‚¯
         */
        assertInRange: function(value, min, max, message) {
            const condition = value >= min && value <= max;
            const fullMessage = message || `${value} should be between ${min} and ${max}`;
            this.assert(condition, fullMessage);
        },

        /**
         * ã™ã¹ã¦ã®ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œ
         */
        runAllTests: function() {
            this.init();

            this.log('\n=== PHASE 2: DiceLogic ãƒ†ã‚¹ãƒˆ ===\n', 'info');
            this.testDiceLogic();

            this.log('\n=== PHASE 3: HistoryManager ãƒ†ã‚¹ãƒˆ ===\n', 'info');
            this.testHistoryManager();

            this.log('\n=== PHASE 4: DiceRenderer ãƒ†ã‚¹ãƒˆ ===\n', 'info');
            this.testDiceRenderer();

            this.log('\n=== PHASE 5: UIController ãƒ†ã‚¹ãƒˆ ===\n', 'info');
            this.testUIController();

            this.printSummary();
        },

        /**
         * DiceLogic ãƒ†ã‚¹ãƒˆ
         */
        testDiceLogic: function() {
            this.log('Testing DiceLogic.roll()...', 'info');

            // ãƒ†ã‚¹ãƒˆ1: D6ã‚’1å›æŒ¯ã‚‹
            const result1 = DiceLogic.roll('D6', 1);
            this.assert(result1.results.length === 1, 'D6 Ã— 1 returns array with 1 element');
            this.assertInRange(result1.results[0], 1, 6, 'D6 returns value between 1 and 6');
            this.assertEquals(result1.total, result1.results[0], 'Total equals single result');

            // ãƒ†ã‚¹ãƒˆ2: D6ã‚’3å›æŒ¯ã‚‹
            const result2 = DiceLogic.roll('D6', 3);
            this.assert(result2.results.length === 3, 'D6 Ã— 3 returns array with 3 elements');
            result2.results.forEach(val => {
                this.assertInRange(val, 1, 6, `Each D6 result is between 1 and 6`);
            });

            // ãƒ†ã‚¹ãƒˆ3: ã™ã¹ã¦ã®ã‚µã‚¤ã‚³ãƒ­ã‚¿ã‚¤ãƒ—
            const diceTypes = ['D4', 'D6', 'D8', 'D10', 'D12', 'D20', 'D100'];
            diceTypes.forEach(type => {
                const result = DiceLogic.roll(type, 1);
                const max = DiceLogic.getMaxValue(type);
                this.assertInRange(result.results[0], 1, max, `${type} returns valid value`);
            });

            // ãƒ†ã‚¹ãƒˆ4: åˆè¨ˆå€¤è¨ˆç®—
            const result4 = DiceLogic.roll('D6', 5);
            const expectedTotal = result4.results.reduce((sum, val) => sum + val, 0);
            this.assertEquals(result4.total, expectedTotal, 'Total is calculated correctly');

            // ãƒ†ã‚¹ãƒˆ5: ã‚¨ãƒƒã‚¸ã‚±ãƒ¼ã‚¹
            try {
                DiceLogic.roll('D6', 0);
                this.assert(false, 'Should throw error for 0 dice');
            } catch (e) {
                this.assert(true, 'Throws error for 0 dice');
            }

            try {
                DiceLogic.roll('D6', 21);
                this.assert(false, 'Should throw error for 21 dice');
            } catch (e) {
                this.assert(true, 'Throws error for 21 dice');
            }

            try {
                DiceLogic.roll('INVALID', 1);
                this.assert(false, 'Should throw error for invalid dice type');
            } catch (e) {
                this.assert(true, 'Throws error for invalid dice type');
            }

            // ãƒ†ã‚¹ãƒˆ6: æœ€å°å€¤ã¨æœ€å¤§å€¤
            this.assertEquals(DiceLogic.getMaxValue('D20'), 20, 'getMaxValue returns correct max');
            this.assertEquals(DiceLogic.getMaxValue('INVALID'), 0, 'getMaxValue returns 0 for invalid type');
        },

        /**
         * HistoryManager ãƒ†ã‚¹ãƒˆ
         */
        testHistoryManager: function() {
            this.log('Testing HistoryManager...', 'info');

            // ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—
            HistoryManager.clear();
            let history = HistoryManager.getHistory();
            this.assertEquals(history.length, 0, 'History is empty after clear');

            // ãƒ†ã‚¹ãƒˆ1: å±¥æ­´è¿½åŠ 
            HistoryManager.addRoll('D6', 2, [3, 4], 7);
            history = HistoryManager.getHistory();
            this.assertEquals(history.length, 1, 'History has 1 entry after adding');
            this.assertEquals(history[0].diceType, 'D6', 'Entry has correct dice type');
            this.assertEquals(history[0].total, 7, 'Entry has correct total');

            // ãƒ†ã‚¹ãƒˆ2: è¤‡æ•°ã®å±¥æ­´
            HistoryManager.addRoll('D20', 1, [15], 15);
            HistoryManager.addRoll('D6', 3, [1, 2, 3], 6);
            history = HistoryManager.getHistory();
            this.assertEquals(history.length, 3, 'History has 3 entries');

            // ãƒ†ã‚¹ãƒˆ3: æ–°ã—ã„é †ã«ä¸¦ã¶
            this.assertEquals(history[0].total, 6, 'Newest entry is first');
            this.assertEquals(history[2].total, 7, 'Oldest entry is last');

            // ãƒ†ã‚¹ãƒˆ4: æœ€å¤§50ä»¶åˆ¶é™
            for (let i = 0; i < 60; i++) {
                HistoryManager.addRoll('D6', 1, [i % 6 + 1], i % 6 + 1);
            }
            history = HistoryManager.getHistory();
            this.assert(history.length <= 50, 'History respects maximum of 50 entries');

            // ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—
            HistoryManager.clear();
        },

        /**
         * DiceRenderer ãƒ†ã‚¹ãƒˆ
         */
        testDiceRenderer: function() {
            this.log('Testing DiceRenderer...', 'info');

            // ãƒ†ã‚¹ãƒˆ1: ã‚µã‚¤ã‚³ãƒ­è¦ç´ ä½œæˆ
            const dice = DiceRenderer.createDice('D6', 5);
            this.assert(dice.classList.contains('dice'), 'Created element has dice class');
            this.assertEquals(dice.dataset.type, 'D6', 'Dice has correct type');
            this.assertEquals(dice.getAttribute('aria-label'), 'D6ã‚µã‚¤ã‚³ãƒ­: 5', 'Dice has correct aria-label');

            // ãƒ†ã‚¹ãƒˆ2: ã‚µã‚¤ã‚³ãƒ­ã®é¡”ãŒä½œæˆã•ã‚Œã‚‹
            const face = dice.querySelector('.dice-face');
            this.assert(face !== null, 'Dice face is created');
            this.assertEquals(face.textContent, '5', 'Face displays correct value');

            // ãƒ†ã‚¹ãƒˆ3: ã‚³ãƒ³ãƒ†ãƒŠã‚¯ãƒªã‚¢
            DiceRenderer.clearContainer();
            const container = document.getElementById('dice-container');
            this.assertEquals(container.children.length, 0, 'Container is cleared');
        },

        /**
         * UIController ãƒ†ã‚¹ãƒˆ
         */
        testUIController: function() {
            this.log('Testing UIController...', 'info');

            // ãƒ†ã‚¹ãƒˆå‰ã«åˆæœŸçŠ¶æ…‹ã«ãƒªã‚»ãƒƒãƒˆ
            UIController.state.selectedDice = 'D6';
            UIController.state.diceCount = 1;

            // ãƒ†ã‚¹ãƒˆ1: åˆæœŸçŠ¶æ…‹
            this.assertEquals(UIController.state.selectedDice, 'D6', 'Initial dice type is D6');
            this.assertEquals(UIController.state.diceCount, 1, 'Initial dice count is 1');

            // ãƒ†ã‚¹ãƒˆ2: ã‚µã‚¤ã‚³ãƒ­ã‚¿ã‚¤ãƒ—é¸æŠ
            UIController.selectDiceType('D20');
            this.assertEquals(UIController.state.selectedDice, 'D20', 'Dice type changes to D20');

            // ãƒ†ã‚¹ãƒˆ3: ã‚µã‚¤ã‚³ãƒ­æ•°æ›´æ–°
            document.getElementById('dice-count').value = 5;
            UIController.updateDiceCount();
            this.assertEquals(UIController.state.diceCount, 5, 'Dice count updates to 5');

            // å…ƒã«æˆ»ã™
            UIController.selectDiceType('D6');
            document.getElementById('dice-count').value = 1;
            UIController.updateDiceCount();
        },

        /**
         * ãƒ†ã‚¹ãƒˆçµæœã‚µãƒãƒªãƒ¼ã‚’è¡¨ç¤º
         */
        printSummary: function() {
            const passed = this.results.filter(r => r.passed).length;
            const failed = this.results.filter(r => !r.passed).length;
            const total = this.results.length;

            this.log('\n' + '='.repeat(50) + '\n', 'info');
            this.log(`ğŸ“Š ãƒ†ã‚¹ãƒˆçµæœ: ${passed}/${total} passed`, failed === 0 ? 'pass' : 'fail');

            if (failed > 0) {
                this.log(`\nâŒ ${failed}å€‹ã®ãƒ†ã‚¹ãƒˆãŒå¤±æ•—ã—ã¾ã—ãŸ`, 'fail');
            } else {
                this.log(`\nâœ… ã™ã¹ã¦ã®ãƒ†ã‚¹ãƒˆãŒãƒ‘ã‚¹ã—ã¾ã—ãŸï¼`, 'pass');
            }
            this.log('\n' + '='.repeat(50), 'info');
        }
    };

    /**
     * ============================================================
     * ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³åˆæœŸåŒ–
     * ============================================================
     */
    document.addEventListener('DOMContentLoaded', function() {
        UIController.init();
        console.log('ğŸ² ã‚µã‚¤ã‚³ãƒ­ã‚¢ãƒ—ãƒªãŒåˆæœŸåŒ–ã•ã‚Œã¾ã—ãŸ');
        console.log('ğŸ§ª ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œã™ã‚‹ã«ã¯ã€Œã™ã¹ã¦ã®ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ãã ã•ã„');
    });
    </script>
</body>
</html>
